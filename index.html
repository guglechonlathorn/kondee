

<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>แบบฟอร์มลีกฟุตบอล</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            min-height: 100vh;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .football-icon {
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="bg-white rounded-xl shadow-2xl p-8 max-w-md w-full">
        <div class="flex items-center justify-center mb-6">
            <div class="football-icon text-4xl mr-2">⚽</div>
            <h1 class="text-2xl font-bold text-gray-800">แบบฟอร์มลีกฟุตบอล</h1>
        </div>
        
        <form id="footballForm" class="space-y-6">
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">ชื่อ</label>
                <input type="text" id="name" name="name" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div>
                <label for="league" class="block text-sm font-medium text-gray-700 mb-1">ลีกฟุตบอลที่สนใจ</label>
                <select id="league" name="league" required
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">-- เลือกลีก --</option>
                    <option value="Premier League">พรีเมียร์ลีก (อังกฤษ)</option>
                    <option value="La Liga">ลาลีกา (สเปน)</option>
                    <option value="Serie A">กัลโช่ เซเรีย อา (อิตาลี)</option>
                    <option value="Bundesliga">บุนเดสลีกา (เยอรมัน)</option>
                    <option value="Ligue 1">ลีกเอิง (ฝรั่งเศส)</option>
                    <option value="Thai League">ไทยลีก</option>
                    <option value="Other">อื่นๆ</option>
                </select>
            </div>
            
            <div id="otherLeagueContainer" class="hidden">
                <label for="otherLeague" class="block text-sm font-medium text-gray-700 mb-1">ระบุลีกอื่นๆ</label>
                <input type="text" id="otherLeague" name="otherLeague" 
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div>
                <label for="team" class="block text-sm font-medium text-gray-700 mb-1">ทีมฟุตบอลที่สนใจ</label>
                <input type="text" id="team" name="team" required 
                    class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <button type="submit" 
                class="w-full bg-gradient-to-r from-blue-600 to-blue-800 text-white py-2 px-4 rounded-md hover:from-blue-700 hover:to-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-300 font-medium">
                บันทึกข้อมูล
            </button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('footballForm');
            const leagueSelect = document.getElementById('league');
            const otherLeagueContainer = document.getElementById('otherLeagueContainer');
            const otherLeagueInput = document.getElementById('otherLeague');
            
            // Show/hide "Other" league input field
            leagueSelect.addEventListener('change', function() {
                if (this.value === 'Other') {
                    otherLeagueContainer.classList.remove('hidden');
                    otherLeagueInput.setAttribute('required', 'required');
                } else {
                    otherLeagueContainer.classList.add('hidden');
                    otherLeagueInput.removeAttribute('required');
                }
            });
            
            // Handle form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Get form data
                const name = document.getElementById('name').value;
                let league = leagueSelect.value;
                const team = document.getElementById('team').value;
                
                // If "Other" is selected, use the value from otherLeague input
                if (league === 'Other') {
                    league = otherLeagueInput.value;
                }
                
                // Show loading alert
                Swal.fire({
                    title: 'กำลังบันทึกข้อมูล',
                    html: 'กรุณารอสักครู่...',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });
                
                // Create a unique callback function name
                const callbackName = 'jsonpCallback_' + Date.now();
                
                // Create global callback function
                window[callbackName] = function(response) {
                    // Hide loading and show success message
                    if (response.result === 'success') {
                        Swal.fire({
                            icon: 'success',
                            title: 'บันทึกข้อมูลสำเร็จ',
                            text: 'ขอบคุณสำหรับข้อมูลของคุณ',
                            confirmButtonText: 'ตกลง',
                            confirmButtonColor: '#3085d6'
                        }).then(() => {
                            // Reset form
                            form.reset();
                            otherLeagueContainer.classList.add('hidden');
                        });
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'เกิดข้อผิดพลาด',
                            text: 'ไม่สามารถบันทึกข้อมูลได้ กรุณาลองใหม่อีกครั้ง',
                            confirmButtonText: 'ตกลง',
                            confirmButtonColor: '#3085d6'
                        });
                    }
                    
                    // Clean up the global callback function
                    delete window[callbackName];
                    document.head.removeChild(script);
                };
                
                // Create the URL with data and callback
                const url = `https://script.google.com/macros/s/AKfycbxq-zn-wBKHHpjxPsqCasZIxwqfz3BMNEz4USKPMgvr1pide_yK2E7NvWlydSKWuW3o/exec?callback=${callbackName}&name=${encodeURIComponent(name)}&league=${encodeURIComponent(league)}&team=${encodeURIComponent(team)}`;
                
                // Create script element for JSONP request
                const script = document.createElement('script');
                script.src = url;
                
                // Handle errors
                script.onerror = function() {
                    Swal.fire({
                        icon: 'error',
                        title: 'เกิดข้อผิดพลาด',
                        text: 'ไม่สามารถเชื่อมต่อกับเซิร์ฟเวอร์ได้ กรุณาลองใหม่อีกครั้ง',
                        confirmButtonText: 'ตกลง',
                        confirmButtonColor: '#3085d6'
                    });
                    
                    // Clean up
                    delete window[callbackName];
                    document.head.removeChild(script);
                };
                
                // Add script to document to start the request
                document.head.appendChild(script);
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'967bacaa63af7322',t:'MTc1Mzk1MDAwNS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

